html {
  // --bg: #232323;
  // --fg: #d8d8d8;

  --bg: white;

  background-color: var(--bg);
  color: var(--fg);
}

$pagew: 375px;
$imgw: 230px;
$scale: $imgw / $pagew;

.demo {
  width: 100vw;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}

.story-image {
  --image-width: 230px;
  --image-height: var(--image-width);
  --loaded: 0;

  transition: all 250ms;

  &.--loaded {
    --loaded: 1;
  }

  position: relative;
  opacity: var(--loaded);

  .__image {
    display: block;
    margin: 0 auto;
    width: var(--image-width);
    height: var(--image-height);
    border-radius: 100%;
  }

  .__fave-fg {
    &::before {
      content: '';
      display: block;
    }
  }

  .__crown {

    $source-crown-width: 350px;
    $source-crown-height: 292px;

    --scale: .2;

    --crown-width: calc(#{$source-crown-width} * var(--scale));
    --crown-height: calc(#{$source-crown-height} * var(--scale));

    --angle: 37deg;
    --gap: 5px; // distance between image and crown

    --angle-with-transition: calc(var(--angle) + var(--loaded) * 3deg);
    --gap-with-transition: var(--gap); // disable this transition for now

    position: absolute;
    top: 50%;
    left: 50%;

    // start at the center of the image, rotate, and move outside
    transition: all .33s ease-out;
    transform:
      translate(-50%, -50%)
      rotate(var(--angle-with-transition))
      translateY(calc(var(--gap-with-transition) * -1))
      translateY(calc(var(--crown-height) / -2))
      translateY(calc(var(--image-height) / -2));

    width: var(--crown-width);
    height: var(--crown-height);
    background: url('/assets/crown.png');
    background-size: cover;
  }
}

.story-detail-page {

  text-align: center;

  .__header {
    height: 44px;
    line-height: 44px;
    background-color: #333;
    text-align: center;
    color: #444;
  }

  .__image-wrapper {
    position: relative;

    --image-width: 230px;
    --image-height: var(--image-width);

    .__image {
      display: block;
      margin: 20px auto;
      width: var(--image-width);
      height: var(--image-height);
      border-radius: 100%;
    }

    .__crown {

      --crown-width: 46px;
      --crown-height: 39px;

      --angle: 37deg;
      --gap: 5px; // distance between image and crown

      position: absolute;
      top: 50%;
      left: 50%;

      // start at the center of the image, rotate, and move outside
      transform:
        translate(-50%, -50%)
        rotate(var(--angle))
        translateY(calc(var(--gap) * -1))
        translateY(calc(var(--crown-height) / -2))
        translateY(calc(var(--image-height) / -2));

      width: var(--crown-width);
      height: var(--crown-height);
      background: url('/assets/crown.png');
    }
  }

  .__title {
    font-family: AmazonEmber-Bold;
    margin: 20px 0 10px;
  }

  .__author {
    color: #b8b8b8;
    margin: 10px 0 20px;
  }
}
